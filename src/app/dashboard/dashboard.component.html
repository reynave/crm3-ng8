<ngx-loading [show]="loading"></ngx-loading>
<app-navigator></app-navigator>

<div class="container-fluid bg-light border-bottom py-1">
  <div class="row">
    <div class="col-12">
      <small> You are here : <a [routerLink]="[ '/dashboard' ]">Dashboard</a> </small>
    </div>
  </div>
</div>


<div class="container-fluid mt-3">
  <div class="row no-gutters">
    <div class="col-12 text-center mb-4">
      <h4> Data Per Quarter (3 Month)</h4> 
      <div>
        <b>Account Manager : </b> <span *ngFor="let x of user"> {{x.name}}. </span>
      </div>
    </div>
    <div class="col-2  mb-3">
      <div class="bg-white  border border-top-black rounded p-2  m-1 text-center">
        <div> 
            <strong> New leads today</strong>
            <h1>{{lead.today}}</h1>
        </div>
        <hr>

        <div> <strong> Total Lead this month</strong>
          <h1>{{lead.month}}</h1>
        </div>
        <hr>
        <div> <strong> Total Lead this quarter</strong>
          <h1>{{lead.quarter}}</h1>
        </div>
        <hr>
        <div><strong>Total Lead this year</strong>
          <h1>{{lead.year}}</h1>
        </div>
      </div>

    </div>
    <div class="col-4   mb-3">
      <div class="bg-light  border border-top-red rounded p-2  m-1">
        <div class="pb-1"> <strong> Funnel</strong></div>

        <div id="funnel"></div>
      </div>

    </div>
    <div class="col-3   mb-3">
      <div class="bg-light  border border-top-yellowgreen rounded p-2  m-1">

        <div class="pb1"> <strong> Leads per distribution per quarter</strong></div>
        <canvas class="leadPerDistribution" id="leadPerDistribution" width="300" height="300"></canvas>
      </div>
    </div>

    <div class="col-3   mb-3">
      <div class="bg-light  border border-top-gray rounded p-2  m-1">

        <div class="pb-1"> <strong>Leads per industry per quarter</strong></div>
        <canvas class="leadPerIndustry" id="leadPerIndustry" width="300" height="300"></canvas>
      </div>
    </div>


    <div class="col-6  mb-3">
      <div class="bg-light  border border-top-blue rounded p-2  m-1">

        <div class="pb-1"> <strong> Target Salesman</strong></div>

        <table class="table table-hover border bg-white border-top border-bottom pointer">
          <thead>
            <tr>
              <th>Target</th>
              <th>Quarter 1 </th>
              <th>Quarter 2 </th>
              <th>Quarter 3</th>
              <th>Quarter 4</th>
            </tr>
          </thead>
          <tbody>
             <tr>
               <td>Target Amount</td>

               <td>250000000</td>
               <td></td>
               <td></td>
               <td></td>
             </tr>

             <tr>
              <td>Target Opportunity Submiteed</td>

              <td>1250000000</td>
              <td></td>
              <td></td>
              <td></td>
            </tr>

            <tr>
              <td>Target Leads Generated</td>

              <td>50</td>
              <td></td>
              <td></td>
              <td></td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>

    <div class="col-6   mb-3">
      <div class="bg-light  border border-top-blue rounded p-2  m-1">

        <div class="pb-1"> <strong> Top 5 Recent Wins</strong></div>

        <table class="table table-hover border bg-white border-top border-bottom pointer">
          <thead>
            <tr>
              <th>No</th>
              <th>SO</th>
              <th>Customer</th>
              <th>Amount</th>
              <th>Date</th>
            </tr>
          </thead>
          <tbody>
            <tr *ngFor="let x of recentwins; let i = index">
              <td>{{i+1}}</td>
              <td>{{x.so_number }}</td>
              <td>{{x.company }}</td>
              <td>Rp {{x.grand_total }}</td>
              <td>{{x.input_date | date }}</td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>

    <div class="col-6 mb-3">
      <div class="bg-light  border border-top-yellow rounded p-2  m-1">

        <div class="p-1"> <strong> Top 10 Recent Quotation on Process</strong></div>
        <table class="table table-hover border bg-white border-top border-bottom pointer">
          <thead>
            <tr>
              <th>No</th>
              <th>Quote</th>
              <th>Customer</th>
              <th>Amount</th>
              <th>Status</th>
              <th>Date</th>
            </tr>
          </thead>
          <tbody>
            <tr *ngFor="let x of recentQuotation; let i = index">
              <td>{{i+1}}</td>
              <td>{{x.quotes_number }}</td>
              <td>{{x.company }}</td>
              <td>Rp {{x.grand_total }}</td>
              <td>{{x.status }}</td>
              <td>{{x.input_date | date }}</td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>

    <div class="col-6   mb-3">
      <div class="bg-light  border border-top-green rounded p-2  m-1">
        <div class="p-1"> <strong>Must Event Next Month</strong></div>
        <table class="table table-hover border bg-white border-top border-bottom pointer">
          <thead>
            <tr>
              <th>No</th>
              <th>Event</th>
              <th>Customer</th>
              <th>Date</th>
            </tr>
          </thead>
          <tbody> 
            <tr *ngFor="let x of event; let i = index">
              <td>{{i+1}}</td>
              <td>{{x.subject }}</td>
              <td>{{x.name }}</td>
              <td> {{x.start_datetime | date:'medium' }}</td> 
            </tr>
          </tbody>
        </table>
      </div>

    </div>

    <div class="col-6  mb-3">
      <div class="bg-light  border border-top-brown rounded p-2  m-1">
        <div class="p-1"> <strong>Must Visit Next Month</strong></div>
        <table class="table table-hover border bg-white border-top border-bottom pointer">
          <thead>
            <tr>
              <th>No</th>
              <th>Event</th>
              <th>Customer</th>
              <th>Date</th>
            </tr>
          </thead>
          <tbody>
            <tr *ngFor="let x of visit; let i = index">
              <td>{{i+1}}</td>
              <td>{{x.subject }}</td>
              <td>{{x.name }}</td>
              <td> {{x.start_datetime | date:'medium' }}</td> 
            </tr>
          </tbody>
        </table>
      </div>


    </div>

  </div>
</div>